<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<link rel="stylesheet" href="/css/index.css" />
<link rel="stylesheet" href="/css/commons/common.css" />
<link rel="stylesheet" href="/css/commons/reset.css" />
<th:block th:insert="~{/layout/sideMenu :: head}" />
<style type="text/css">
</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<script type="text/javascript">
	$(function(){
		$("#start-time").click(function(){
			
			var now = new Date();
			var year = now.getFullYear(); // 연도 얻어오기
			var months = now.getMonth() + 1; // 월 얻어오기
			var date = now.getDate(); // 일 얻어오기
			var hours = now.getHours(); // 시 얻어오기
			var minutes = now.getMinutes(); // 분 얻어오기
			
			//월, 일, 시, 분 한 자리수면 앞에 0 붙여주기
			months = resetPlusZero(months);
			date = resetPlusZero(date);
			hours = resetPlusZero(hours);
			minutes = resetPlusZero(minutes);
			function resetPlusZero(i) {
			    if (i<10) {i = "0" + i};
			    return i;
			}
			
			//timeData통합
			var timeData = year + months + date + hours + minutes;
			
			/* console.log("year: " + year);
			console.log("months: " + months);
			console.log("date: " + date);
			console.log("hours: " + hours);
			console.log("minutes: " + minutes);
			console.log("timeData: " + timeData); */
			
			var result = confirm("현재 시각은 " + hours + "시 " + minutes + "분입니다. \n출근하시겠습니까?");
			
			//출근 데이터 전송(연월일시분)
			if(result){
			    $.ajax({
			    	type:"post",
			    	url:"/attendance/in/"+timeData,
			    	contentType : "application/x-www-form-urlencoded; charset=utf-8",
			    	dataType:"text",
			    	success: function(timedata){
			    		console.log("성공 timeData : " + timeData);
			    	},
			    	error: function(){
			    		console.log("실패");
			    	}
			    })
			}
			else
			{
			    
			}
			
		})
	});
</script>
</head>
<main>
	<th:block th:insert="~{/layout/sideMenu :: header}" />
	테스트
	<button id="start-time">출근</button>
	<button>퇴근</button>
</main>
</html>
